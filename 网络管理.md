# 1.命令

## 1.1.ip addr

```shell
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 52:54:00:12:34:56 brd ff:ff:ff:ff:ff:ff
    inet 192.168.0.100/24 brd 192.168.0.255 scope global dynamic eth0
       valid_lft 86400sec preferred_lft 86400sec
    inet6 fe80::5054:ff:fe12:3456/64 scope link 
       valid_lft forever preferred_lft forever
```

1. 网络接口 1: lo

   ```shell
   1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
   ```

   - `1`: 接口索引编号。

   - `lo`: 接口名称（这是回环接口）。

   - `<LOOPBACK,UP,LOWER_UP>`: 接口标志，表示接口的状态和功能。

     - `LOOPBACK`: 这是一个回环接口。

     - `UP`: 接口已经启用。

     - `LOWER_UP`: 物理层连接正常。

   - `mtu 65536`: 最大传输单元（MTU），表示接口能够发送的最大数据包大小。

   - `qdisc noqueue`: 队列调度器类型。

   - `state UNKNOWN`: 接口状态。

   - `group default`: 接口所属的组。

   - `qlen 1000`: 队列长度。

   ```shell
   link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
   ```

   - `link/loopback`: 链路类型，这里是回环。
   - `00:00:00:00:00:00`: 硬件地址（回环接口没有实际的硬件地址）。
   - `brd 00:00:00:00:00:00`: 广播地址（对于回环接口，这也是回环地址）。

   ```shell
   inet 127.0.0.1/8 scope host lo
   ```

   - `valid_lft forever`: 地址的有效期。
   - `preferred_lft forever`: 地址的首选有效期。

   ```shell
   inet6 ::1/128 scope host 
   ```

   - `inet6 ::1/128`: IPv6地址和子网掩码。
   - `scope host`: 地址范围，这里表示是本地主机地址。

2. 网络接口 2: eth0

   ```shell
   2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
   ```

   - `2`: 接口索引编号。
   - `eth0`: 接口名称（这是以太网接口）。
   - `<BROADCAST,MULTICAST,UP,LOWER_UP>`: 接口标志，表示接口的状态和功能
     - `BROADCAST`: 支持广播。
     - `MULTICAST`: 支持多播。
     - `UP`: 接口已经启用。
     - `LOWER_UP`: 物理层连接正常。
   - `mtu 1500`: 最大传输单元（MTU），表示接口能够发送的最大数据包大小。
   - `qdisc pfifo_fast`: 队列调度器类型。
   - `state UP`: 接口状态。
   - `group default`: 接口所属的组。
   - `qlen 1000`: 队列长度。

   ```shell
   link/ether 52:54:00:12:34:56 brd ff:ff:ff:ff:ff:ff
   ```

   - `link/ether`: 链路类型，这里是以太网。
   - `52:54:00:12:34:56`: 硬件地址（MAC地址）。
   - `brd ff:ff:ff:ff:ff:ff`: 广播地址。

   ```shell
   inet 192.168.0.100/24 brd 192.168.0.255 scope global dynamic eth0
   ```

   - `inet 192.168.0.100/24`: IPv4地址和子网掩码。
   - `brd 192.168.0.255`: 广播地址。
   - `scope global`: 地址范围，这里表示是全局地址。
   - `dynamic`: 动态分配的地址（例如通过DHCP）。
   - `eth0`: 绑定的接口名称。

   ```shell
   valid_lft 86400sec preferred_lft 86400sec
   ```

   - `valid_lft 86400sec`: 地址的有效期，单位是秒。
   - `preferred_lft 86400sec`: 地址的首选有效期，单位是秒。

   ```shell
   inet6 fe80::5054:ff:fe12:3456/64 scope link 
   ```

   - `inet6 fe80::5054:ff:fe12:3456/64`: IPv6地址和子网掩码
   - `scope link`: 地址范围，这里表示是链路本地地址。

> **总结**  `ip add` 命令输出的信息包括每个网络接口的名称、状态、硬件地址、IP地址等详细信息。理解这些信息有助于网络配置和故障排除。

1. 

# 其他

云数据、大数据、物联网、人工只能

shell、python

Ansible/Zabbix等开源网络工具



# 2.外网远程访问内网服务器

> 在出差在外需要临时访问公司内网资源时，可以使用网络地址转换、端口映射、虚拟专用网络或远程桌面协议等方式实现外网访问内网服务器。为保障网络安全，务必正确配置安全措施，如设置密码、使用安全连接方式或加密协议等

#### 2.1.网络地址转换（NAT）

> 如果你的内网服务器是通过 NAT 连接到互联网的，你可以使用 NAT 来实现外网访问内网服务器。NAT 路由器会将同时发起的请求转发到内网服务器上，以便外部设备能够访问该服务器。

#### 2.2.端口映射

> 如果你的内网服务器没有 NAT，你可以使用端口映射来实现外网访问内网服务器。你需要将网关路由器的特定端口（例如80）映射到内网服务器的端口上。这使外部设备可以通过访问该端口从互联网中访问内网服务器

#### 2.3.虚拟专用网络（VPN）

> 另一个方法是使用 VPN 连接内网服务器。通过 VPN 网络，可以使外部设备能够通过一个虚拟的专用网络连接到内网服务器，从而实现外部访问。天联就是一款虚拟专网网络产品，他可以把不同的城市组建成一个虚拟网络，在这个虚拟网络中可以实现互联互通

要通过搭建VPN来实现内网环境对外网的访问，你可以按照以下步骤进行：

1. **选择合适的VPN解决方案**：
   - **VPN类型选择**：可以选择基于软件的解决方案（如OpenVPN、SoftEther等）或硬件设备（如路由器支持的VPN功能）。
   - **安全性考虑**：确保所选方案具有足够的加密和认证机制，以保护数据安全。
2. **设置VPN服务器**：
   - 在你的内网环境中选择一台服务器或设备作为VPN服务器。
   - 配置VPN服务器软件，按照提供的文档进行设置。通常需要指定VPN服务器的IP地址、子网掩码、用户身份验证方式等信息。
3. **配置防火墙和路由**：
   - 确保内网环境中的防火墙允许VPN流量通过。
   - 配置路由，确保从VPN客户端到内部资源的访问路径是正确的。
4. **分发VPN客户端**：
   - 将所选VPN客户端软件分发给需要访问内网资源的外部用户。
   - 用户根据你提供的配置信息（如服务器IP地址、端口号、凭据等）配置其VPN客户端。
5. **测试和调试**：
   - 在设置完成后，进行测试确保VPN连接正常工作。
   - 确保外部用户可以通过VPN访问到内网的资源，如文件共享、内部网站等。
6. **安全性和监控**：
   - 确保VPN连接是安全的，使用强密码和加密连接。
   - 设置监控和日志记录，以便及时发现和应对任何潜在的安全问题。

通过这些步骤，你就可以搭建一个能够让外部用户通过VPN访问你内网资源的解决方案了。

#### 2.4.远程桌面协议（RDP）或远程 Shell

> 通过远程桌面协议（如在 Windows 中使用 RDP）或远程 Shell（如在 Linux 中使用 SSH）可以远程管理内网服务器。但这种方法需要正确配置远程访问服务，以便外部设备能够访问内部资源。
>
> 无论你选择哪种方式，为了保证网络安全，请务必正确配置安全措施，如设置好密码、使用安全连接方式（如 HTTPS），或者使用 TLS/SSL 等加密协议，防止安全威胁和数据泄露

# 3.协议

## 3.1.DHCP

> 动态主机配置协议 DHCP（Dynamic Host Configuration Protocol，动态主机配置协议） 是 RFC 1541（已被 RFC 2131 取代）定义的标准协议，该协议允许服务器向客户端动态分配 IP 地址和配置信息

DHCP协议支持C/S（客户端/服务器）结构，主要分为两部分：

1、DHCP客户端：通常为网络中的PC、打印机等终端设备，使用从DHCP服务器分配下来的IP信息，包括IP地址、[DNS](https://baike.baidu.com/item/DNS/427444?fromModule=lemma_inlink)等。

2、[DHCP服务器](https://baike.baidu.com/item/DHCP服务器/0?fromModule=lemma_inlink)：所有的IP网络设定信息都由DHCP服务器集中管理，并处理客户端的DHCP请求。

DHCP采用UDP作为传输协议，客户端发送消息到DHCP服务器的的67号端口，服务器返回消息给客户端的68号端口

3、DHCP配置文件









![1720690955859](C:\Users\hkk\Documents\WeChat Files\wxid_xur3s44qv69122\FileStorage\Temp\1720690955859.jpg)
